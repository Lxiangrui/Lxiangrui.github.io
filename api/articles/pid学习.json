{"title":"pid学习","uid":"a22b5a6b2aea63003d83f444c152a314","slug":"pid学习","date":"2022-04-12T15:46:49.000Z","updated":"2022-04-24T10:55:12.498Z","comments":true,"path":"api/articles/pid学习.json","keywords":null,"cover":"https://s1.ax1x.com/2022/04/15/L8VPln.jpg","content":"<h1 id=\"pid学习\"><a href=\"#pid学习\" class=\"headerlink\" title=\"pid学习\"></a>pid学习</h1><p>PID 实指“比例 proportional”、“积分 integral”、“微分 derivative”</p>\n<h2 id=\"理解位置式pid和增量式pid：\"><a href=\"#理解位置式pid和增量式pid：\" class=\"headerlink\" title=\"理解位置式pid和增量式pid：\"></a>理解位置式pid和增量式pid：</h2><p>为什么有位置式pid和增量式pid？<strong>数字 PID 控制算法因时间离散化不同，通常分为位置式 PID 控制算法和增量式 PID 控制算法。</strong></p>\n<p>[<a href=\"https://blog.csdn.net/u014453443/article/details/100573722?ops_request_misc=%7B%22request_id%22:%22165078908716780357230935%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=165078908716780357230935&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-100573722.142%5Ev9%5Epc_search_result_control_group,157%5Ev4%5Econtrol&utm_term=%E4%BD%8D%E7%BD%AEpid%E5%92%8C%E5%A2%9E%E9%87%8Fpid&spm=1018.2226.3001.4187\">(81条消息) 位置式与增量式PID_苏守坤的博客-CSDN博客_pid位置式和增量式</a>]:</p>\n<h3 id=\"位置式\"><a href=\"#位置式\" class=\"headerlink\" title=\"位置式:\"></a>位置式:</h3><p>位置式是我一直理解的那种比较简单的pid</p>\n<p><a href=\"https://imgtu.com/i/L4770U\"><img src=\"https://s1.ax1x.com/2022/04/24/L4770U.png\" alt=\"L4770U.png\"></a></p>\n<h2 id=\"串级核心理念：（参考逐飞！！！）\"><a href=\"#串级核心理念：（参考逐飞！！！）\" class=\"headerlink\" title=\"串级核心理念：（参考逐飞！！！）\"></a>串级核心理念：（参考逐飞！！！）</h2><p>串级pid的核心理念，用除最内环外的其他所有环，来纠正最内环</p>\n<p><a href=\"https://imgtu.com/i/L46OM9\"><img src=\"https://s1.ax1x.com/2022/04/24/L46OM9.png\" alt=\"L46OM9.png\"></a></p>\n<ol>\n<li>角速度环控制：仅对陀螺仪采集到的角速度进行闭环控制，因此得到的效果也仅仅在小车晃动时（即有角速度的时候），动量轮才有一些阻力感即可，并不能平衡</li>\n<li>速度环控制：根据小车倾斜的角度闭环输出，单独控制角度环时，直接输出到电机，得到的效果与角速度环差不多</li>\n<li>速度环控制：对电机的转速进行闭环控制，速度环应该为正反馈，当电机旋转时，跳过速度环，应该转的更快。</li>\n</ol>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\">\nPWM_accel <span class=\"token operator\">=</span> <span class=\"token operator\">-</span> <span class=\"token function\">Velocity_Control</span><span class=\"token punctuation\">(</span><span class=\"token function\">X_balance_Control</span><span class=\"token punctuation\">(</span><span class=\"token function\">X_balancetwo_Control</span><span class=\"token punctuation\">(</span>ECPULSE1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">/**************************************************************************\n内环------角速度环------增量式PI控制\n**************************************************************************/</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">Velocity_Control</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Re_Gyro<span class=\"token punctuation\">)</span><span class=\"token comment\">//  参数：速度环反馈（速度环输出反馈）</span>\n<span class=\"token punctuation\">&#123;</span>   <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> flag<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\t\t\t\t<span class=\"token comment\">//可以使形参的生命周期和main函数一样</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">float</span> PWM_Plus_P<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">float</span> Bias<span class=\"token punctuation\">,</span>PWM_F<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">float</span> Gyro<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">float</span> New_error<span class=\"token punctuation\">,</span>Old_error<span class=\"token punctuation\">;</span>\n    Gyro<span class=\"token operator\">=</span>gyro<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    New_error<span class=\"token operator\">=</span>Gyro<span class=\"token operator\">+</span>Re_Gyro<span class=\"token operator\">-</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    Bias<span class=\"token operator\">=</span>New_error<span class=\"token operator\">-</span>Old_error<span class=\"token punctuation\">;</span>\n    PWM_Plus_P <span class=\"token operator\">+=</span> X_Velocity_KP<span class=\"token operator\">*</span>Bias<span class=\"token punctuation\">;</span>\n    PWM_Plus_I <span class=\"token operator\">+=</span> X_Velocity_KI<span class=\"token operator\">*</span>New_error<span class=\"token punctuation\">;</span>\n    PWM_F<span class=\"token operator\">=</span> PWM_Plus_P <span class=\"token operator\">+</span> PWM_Plus_I<span class=\"token punctuation\">;</span>\n    Old_error<span class=\"token operator\">=</span>New_error<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> PWM_F<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">/**************************************************************************\n中环------角度环\n**************************************************************************/</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">X_balance_Control</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Angle<span class=\"token punctuation\">)</span>  <span class=\"token comment\">//参数：速度环反馈值（速度环输出反馈）</span>\n<span class=\"token punctuation\">&#123;</span>\n     <span class=\"token keyword\">float</span> Error<span class=\"token punctuation\">;</span>\n     Error<span class=\"token operator\">=</span>Pitch<span class=\"token operator\">-</span>Angle<span class=\"token operator\">-</span>Pitch_Zero<span class=\"token punctuation\">;</span>        <span class=\"token comment\">//注意这里可能是他极性是-</span>\n\n\n     PWM_S<span class=\"token operator\">=</span>X_Balance_KP<span class=\"token operator\">*</span>Error <span class=\"token operator\">+</span> gyro<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>X_Balance_KD<span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">return</span> PWM_S<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">/**************************************************************************\n外环------速度环\n**************************************************************************/</span>\n<span class=\"token keyword\">float</span> <span class=\"token function\">X_balancetwo_Control</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> Enc<span class=\"token punctuation\">)</span>  <span class=\"token comment\">//参数：编码器反馈</span>\n<span class=\"token punctuation\">&#123;</span>\n     PWM_T <span class=\"token operator\">=</span>X_Speed_KP<span class=\"token operator\">*</span>Enc<span class=\"token operator\">/</span><span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">return</span> PWM_T<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n\n\n\n\n\n\n<h3 id=\"Ti大佬的提示：\"><a href=\"#Ti大佬的提示：\" class=\"headerlink\" title=\"Ti大佬的提示：\"></a>Ti大佬的提示：</h3><p>Ti大佬是我在b站认识的一个大佬，他在群里面分享了这两句话，说是很关键，所以我将它们贴到这里防止我把它们弄丢了，哈哈哈</p>\n<table>\n<thead>\n<tr>\n<th><a href=\"https://imgtu.com/i/Lu3j3j\"><img src=\"https://s1.ax1x.com/2022/04/12/Lu3j3j.png\" alt=\"Lu3j3j.png\" style=\"zoom:150%;\" /></a></th>\n<th><a href=\"https://imgtu.com/i/L8ZvGQ\"><img src=\"https://s1.ax1x.com/2022/04/15/L8ZvGQ.jpg\" alt=\"L8ZvGQ.jpg\" style=\"zoom: 67%;\" /></a></th>\n</tr>\n</thead>\n</table>\n","text":"pid学习PID 实指“比例 proportional”、“积分 integral”、“微分 derivative” 理解位置式pid和增量式pid：为什么有位置式pid和增量式pid？数字 PID 控制算法因时间离散化不同，通常分为位置式 PID 控制算法和增量式 PID 控制...","link":"","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"控制原理","slug":"控制原理","count":1,"path":"api/categories/控制原理.json"}],"tags":[{"name":"知识学习","slug":"知识学习","count":1,"path":"api/tags/知识学习.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#pid%E5%AD%A6%E4%B9%A0\"><span class=\"toc-text\">pid学习</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%90%86%E8%A7%A3%E4%BD%8D%E7%BD%AE%E5%BC%8Fpid%E5%92%8C%E5%A2%9E%E9%87%8F%E5%BC%8Fpid%EF%BC%9A\"><span class=\"toc-text\">理解位置式pid和增量式pid：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%8D%E7%BD%AE%E5%BC%8F\"><span class=\"toc-text\">位置式:</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%B2%E7%BA%A7%E6%A0%B8%E5%BF%83%E7%90%86%E5%BF%B5%EF%BC%9A%EF%BC%88%E5%8F%82%E8%80%83%E9%80%90%E9%A3%9E%EF%BC%81%EF%BC%81%EF%BC%81%EF%BC%89\"><span class=\"toc-text\">串级核心理念：（参考逐飞！！！）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Ti%E5%A4%A7%E4%BD%AC%E7%9A%84%E6%8F%90%E7%A4%BA%EF%BC%9A\"><span class=\"toc-text\">Ti大佬的提示：</span></a></li></ol></li></ol></li></ol>","author":{"name":"祥瑞","slug":"blog-author","avatar":"https://s1.ax1x.com/2022/04/08/L9tIA0.jpg","link":"/","description":"励志成为野生钢铁侠-稚晖君的小弟 <br /> @ <b>B站：电工渣</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"X-bot","uid":"e81953d080c3cdbe02749919d9ab3a38","slug":"X-bot","date":"2021-10-23T13:41:29.000Z","updated":"2022-04-09T10:00:44.288Z","comments":true,"path":"api/articles/X-bot.json","keywords":null,"cover":"https://z3.ax1x.com/2021/10/24/5W19Cn.jpg","text":"X-bot前言这个项目是我在稚辉君的视频里面看见的，是一个完全开源的项目，而且对他来说是一个比较简单的项目，但对于我这种没有什么DIY经验的同学来说，还是有点难的，不过可能我运气比较好吧，在他的视频评论区下面找到了一个大佬，他帮助了我很多,最后好像玩着玩着断断续续一直弄了1个多月...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"DIY","slug":"DIY","count":1,"path":"api/categories/DIY.json"}],"tags":[{"name":"写字机器人","slug":"写字机器人","count":1,"path":"api/tags/写字机器人.json"}],"author":{"name":"祥瑞","slug":"blog-author","avatar":"https://s1.ax1x.com/2022/04/08/L9tIA0.jpg","link":"/","description":"励志成为野生钢铁侠-稚晖君的小弟 <br /> @ <b>B站：电工渣</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"硬件控制-arm-linux","uid":"a66f27aecf2233b9864ca3ce3962950b","slug":"硬件控制-arm-linux","date":"2022-04-09T03:53:52.000Z","updated":"2022-04-09T15:18:58.748Z","comments":true,"path":"api/articles/硬件控制-arm-linux.json","keywords":null,"cover":"https://s1.ax1x.com/2022/04/09/Li1OZq.jpg","text":"环境搭建实现链路 嵌入式交叉编译开发环境 uart串口调试 jtag口 //隐藏在金手指核心板的背部，未引出到扩展板的管脚上，不好调试 uart调试口 //在SD卡底部，横着一排(2G板子时在摄像头 排线的旁边) ​ //GND: usb转串口的黑线接板子的 TXD: 接白线 R...","link":"","photos":[],"count_time":{"symbolsCount":"5.7k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"arm_linux","slug":"arm-linux","count":1,"path":"api/tags/arm-linux.json"}],"author":{"name":"祥瑞","slug":"blog-author","avatar":"https://s1.ax1x.com/2022/04/08/L9tIA0.jpg","link":"/","description":"励志成为野生钢铁侠-稚晖君的小弟 <br /> @ <b>B站：电工渣</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}